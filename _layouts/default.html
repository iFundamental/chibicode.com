<!DOCTYPE html>
<html {% if page.categories contains "ja" %}lang="ja"{% else %}lang="en"{% endif %}>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="{{ "/favicon.ico" | prepend:site.baseurl }}">
    {% capture author_name %}{% if page.categories contains "ja" %}上杉周作{% else %}Shu Uesugi{% endif %}{% endcapture %}
    <title>{% if page.title %}{{ page.title }} | {% endif %}{{ author_name }}</title>
    {% capture description %}{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines }}{% else %}{{ site.description }}{% endif %}{% endcapture %}
    {% capture title %}{% if page.title %}{{ page.title }}{% else %}{{ author_name }}{% endif %}{% endcapture %}
    {% capture url %}{{ site.github.url }}{{ page.url | remove:'index.html' }}{% endcapture %}
    {% capture og_image %}http://www.chibicode.com/assets/images/shu-uesugi-og.jpg{% endcapture %}
    {% if page.og_image %}{% capture og_image %}{{ page.og_image }}{% endcapture %}{% endif %}
    {% if page.image %}{% capture og_image %}http://chibicode.com{{ page.image }}{% endcapture %}{% endif %}
    <meta name="description" content="{{ description | xml_escape }}">

    {% if page.excerpt %}
    <meta property="og:type" content="article" />
    {% else %}
    <meta property="og:type" content="website" />
    {% endif %}
    <meta property="og:url" content="{{ url }}" />
    <meta property="og:title" content="{{ title | xml_escape }}" />
    <meta property="og:description" content="{{ description }}" />
    <meta property="og:image" content="{{ og_image }}" />
    <meta property="og:image:url" content="{{ og_image }}" />
    {% if page.og_image_width %}<meta property="og:image:width" content="{{ page.og_image_width }}" />{% endif %}
    {% if page.og_image_height %}<meta property="og:image:height" content="{{ page.og_image_height }}" />{% endif %}

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="{{ title | xml_escape }}" />
    <meta name="twitter:creator" content="@chibicode">
    <meta name="twitter:description" content="{{ description | xml_escape }}" />
    <meta name="twitter:text:description" content="{{ description | xml_escape }}" />
    <meta name="twitter:url" content="{{ url }}" />
    <meta name="twitter:image" content="{{ og_image }}">
    {% if site.github %}
      <script src="{{ "/dist/bundle.js" | prepend:site.baseurl }}"></script>
    {% else %}
      <script src="http://localhost:8787/hot.js"></script>
    {% endif %}
  </head>
  <body class="{% unless page.cover_image %}pt4 pt5-ns{% endunless %} pb5">
    {% if page.home %}
      {% unless page.categories contains "ja" %}
        <div class="fixed w-100 top-0 tc callout-bar bg-white f6 pv3 ph2 bb b--black-50 bg-animate hover-bg-near-white">
          Japanese blog: <a href="/jp" class="fw6">日本語ブログはこちら</a>。
        </div>
        <div class="pt5"></div>
      {% endunless %}
    {% endif %}
    {% if page.cover_image %}
      <div class="mb4">
        <img src="{{page.cover_image}}" />
      </div>
    {% else %}
    <h2 class=
      {% if page.home %}
        "ph3 f0-ns f1 mt0 mb4-ns mb3 lh-f0-ns lh-solid fw6 tracked-tight ttl tc"
      {% else %}
        "ph3 f3-ns f4 mt0 mb5-ns mb4 lh-solid fw6 tracked-tight ttl tc silver"
      {% endif %}>
      {% if page.home  %}
        <a href="/" class="no-underline">Shu Uesugi</a>
      {% elsif page.categories contains "ja" %}
        <a href="/jp" class="no-underline">上杉周作</a>
      {% else %}
        <a href="/" class="no-underline">Shu Uesugi</a>
      {% endif %}
    </h2>
    {% endif %}
    <div class="container center ph3">
      <div class="mb6">
        {{ content }}
      </div>
      <footer class="moon-gray">
        Old articles are <a href="/archive">archived here</a>. My writing is licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA</a>. Opinions my own.
      </footer>
    </div>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-32987822-1', 'auto');
      ga('send', 'pageview');
    </script>
    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
    <div id="fb-root"></div><script>(function(d, s, id) {  var js, fjs = d.getElementsByTagName(s)[0];  if (d.getElementById(id)) return;  js = d.createElement(s); js.id = id;  js.src = "//connect.facebook.net/{% if page.categories contains 'ja' %}ja_JP{% else %}en_US{% endif %}/sdk.js#xfbml=1&version=v2.6";  fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script>
  </body>
</html>
